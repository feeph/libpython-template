#!/bin/bash
#
# run various tests to validate the code
#

set -e
set -u

# code quality
pdm run flake8 {{package_namespace}}/ examples/ tests/

# code style
# (pylint is configured to accept "less than perfect")
pdm run pylint {{package_namespace}}/ examples/ tests/
{% if is_typed %}

# validate type hints (package)
pdm run mypy -p {{package_namespace}}.{{package_name}}

# validate type hints (extra files)
# (we need to be careful since there might be no files)
FILES=`find examples/ tests/ -name '*.py'`
if [[ -n $FILES ]] ; then
    pdm run mypy $FILES
fi
{% endif %}

echo "----------------------------------------------------------------------"
echo "If you reached this far you passed. Congratulations!"
echo "----------------------------------------------------------------------"
